<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soal 10 - Senjata Tradisional</title>
    <style>
        :root {
            --bg: #000000;
            --card: #ffffff;
            --accent: #ffee00;
            --correct: #00ff88;
            --wrong: #ff0055;
            --border: 5px solid #000000;
        }

        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            font-family: 'Arial Black', sans-serif;
        }

        body {
            background-color: var(--bg);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            overflow-y: auto;
            overflow-x: hidden;
            touch-action: none;
        }

        .quiz-container {
            background: var(--card);
            border: var(--border);
            box-shadow: 15px 15px 0px var(--accent);
            width: 95vw;
            max-width: 1000px;
            padding: 30px;
            position: relative;
            margin: auto;
        }

        .header-ui {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .badge {
            border: 3px solid #000;
            padding: 5px 15px;
            background: #fff;
        }

        .instruction {
            background: #000; color: #fff;
            padding: 15px; text-align: center;
            margin-bottom: 25px; font-size: 1rem;
        }

        .match-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 850px) {
            .match-grid { grid-template-columns: repeat(2, 1fr); }
            body { align-items: flex-start; }
        }

        /* Drop Zones with Labels */
        .target-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .drop-zone {
            width: 100%;
            height: 120px;
            border: 3px dashed #000;
            background: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: 0.3s;
            position: relative;
        }

        .drop-zone.drag-over {
            background: #e0e0e0;
            border-style: solid;
        }

        .zone-label {
            background: #000;
            color: #fff;
            padding: 5px 15px;
            font-size: 0.8rem;
            text-align: center;
            width: 100%;
        }

        /* Draggable Images */
        .source-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            min-height: 100px;
            padding: 20px;
            border: 3px solid #eee;
            background: #fff;
        }

        .draggable-img {
            width: 100px;
            height: 80px;
            border: 3px solid #000;
            cursor: grab;
            position: relative;
            background: #fff;
            padding: 5px;
            transition: 0.2s;
        }
        
        .draggable-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
        }

        .draggable-img:hover {
            transform: scale(1.1);
            box-shadow: 5px 5px 0px var(--accent);
            z-index: 10;
        }

        .draggable-img.dragging {
            opacity: 0.5;
        }

        #check-btn {
            margin-top: 30px;
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            background: #000;
            color: #fff;
            border: none;
            cursor: pointer;
            font-family: 'Arial Black', sans-serif;
            text-transform: uppercase;
            box-shadow: 8px 8px 0px var(--accent);
        }

        #check-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 12px 12px 0px var(--accent);
        }

        .creators-box {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            background: #fff;
            border: 3px solid #000;
            padding: 10px;
            box-shadow: 5px 5px 0px #000;
            font-family: 'Arial Black', sans-serif;
            font-size: 10px;
            line-height: 1.4;
            text-transform: uppercase;
        }
    </style>
    <script src="quiz-core.js"></script>
</head>
<body>

    <div class="quiz-container">
        <div class="header-ui">
            <div class="badge">SKOR: <span id="score">0</span></div>
            <div class="badge" id="timer">02:00</div>
        </div>

        <div class="instruction">
            SERET GAMBAR SENJATA KE DALAM KOTAK NAMA YANG SESUAI!
        </div>

        <div class="match-grid">
            <div class="target-box">
                <div class="drop-zone" data-target="keris"></div>
                <div class="zone-label">KERIS</div>
            </div>
            <div class="target-box">
                <div class="drop-zone" data-target="mandau"></div>
                <div class="zone-label">MANDAU</div>
            </div>
            <div class="target-box">
                <div class="drop-zone" data-target="rencong"></div>
                <div class="zone-label">RENCONG</div>
            </div>
            <div class="target-box">
                <div class="drop-zone" data-target="kujang"></div>
                <div class="zone-label">KUJANG</div>
            </div>
            <div class="target-box">
                <div class="drop-zone" data-target="celurit"></div>
                <div class="zone-label">CELURIT</div>
            </div>
        </div>

        <div class="source-grid" id="source-list">
            <div class="draggable-img" draggable="true" data-type="keris">
                <img src="images/keris.jpg" alt="Keris">
            </div>
            <div class="draggable-img" draggable="true" data-type="mandau">
                <img src="images/mandau.jpg" alt="Mandau">
            </div>
            <div class="draggable-img" draggable="true" data-type="rencong">
                <img src="images/rencong.jpg" alt="Rencong">
            </div>
            <div class="draggable-img" draggable="true" data-type="kujang">
                <img src="images/kujang.jpg" alt="Kujang">
            </div>
            <div class="draggable-img" draggable="true" data-type="celurit">
                <img src="images/celurit.jpg" alt="Celurit">
            </div>
        </div>

        <button id="check-btn" onclick="checkAnswers()">CEK JAWABAN</button>

    </div>

    <div class="creators-box">
        1. Arya Bilal Azzuri / 08 / XII RPL 3<br>
        2. Fiha Aridhoi / 18 / XII RPL 3<br>
        3. Muhammad Ayman Hammami / 26 / XII RPL 3
    </div>

    <script>
        document.getElementById('score').innerText = localStorage.getItem('totalScore') || 0;
        
        // Randomize source
        const sourceList = document.getElementById('source-list');
        for (let i = sourceList.children.length; i >= 0; i--) {
            sourceList.appendChild(sourceList.children[Math.random() * i | 0]);
        }

        const draggables = document.querySelectorAll('.draggable-img');
        const dropZones = document.querySelectorAll('.drop-zone');

        draggables.forEach(item => {
            item.addEventListener('dragstart', () => {
                item.classList.add('dragging');
            });
            item.addEventListener('dragend', () => {
                item.classList.remove('dragging');
            });
        });

        dropZones.forEach(zone => {
            zone.addEventListener('dragover', e => {
                e.preventDefault();
                zone.classList.add('drag-over');
            });

            zone.addEventListener('dragleave', () => {
                zone.classList.remove('drag-over');
            });

            zone.addEventListener('drop', e => {
                e.preventDefault();
                zone.classList.remove('drag-over');
                const dragged = document.querySelector('.dragging');
                if(!dragged) return;

                // Handle if something is already there
                const existing = zone.querySelector('.draggable-img');
                if(existing) {
                    sourceList.appendChild(existing);
                }

                zone.appendChild(dragged);
            });
        });

        function checkAnswers() {
            let correctCount = 0;
            let total = 0;
            let allPlaced = true;

            dropZones.forEach(zone => {
                const item = zone.querySelector('.draggable-img');
                if(item) {
                    total++;
                    if(item.dataset.type === zone.dataset.target) {
                        correctCount++;
                        item.style.borderColor = "var(--correct)";
                        item.style.boxShadow = "5px 5px 0px var(--correct)";
                    } else {
                        item.style.borderColor = "var(--wrong)";
                        item.style.boxShadow = "5px 5px 0px var(--wrong)";
                    }
                } else {
                    allPlaced = false;
                }
            });

            if(!allPlaced && total < 5) {
                alert("Harap pasangkan semua gambar sebelum memeriksa!");
                return;
            }

            if(correctCount === 5) {
                QuizCore.updateScore(10);
                document.getElementById('score').innerText = localStorage.getItem('totalScore');
                document.body.style.backgroundColor = "var(--correct)";
                setTimeout(() => window.location.href = 'selesai.html', 1500);
            } else {
                document.body.style.backgroundColor = "var(--wrong)";
                setTimeout(() => window.location.href = 'selesai.html', 2000); // Or try again? Logic previously was fail forward
            }
        }
    </script>
</body>
</html>