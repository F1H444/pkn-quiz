<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soal 3 - Alat Musik Kolintang</title>
    <style>
        :root {
            --bg: #000000;
            --card: #ffffff;
            --accent: #ff00ea;
            --correct: #00ff88;
            --wrong: #ff0055;
            --text: #000000;
            --border: 5px solid #000000;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial Black', sans-serif;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            overflow-y: auto;
            overflow-x: hidden;
        }

        #particles {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .quiz-card {
            background: var(--card);
            border: var(--border);
            box-shadow: 15px 15px 0px var(--accent);
            width: 95vw;
            max-width: 900px;
            padding: 30px;
            position: relative;
            z-index: 10;
            animation: pageIn 0.8s forwards;
            margin: auto;
        }

        @keyframes pageIn {
            0% { transform: translateY(50px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .header-ui {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .badge {
            border: 3px solid #000;
            padding: 8px 15px;
            background: #fff;
            box-shadow: 4px 4px 0px #000;
        }

        .instruction {
            background: #f0f0f0;
            padding: 15px;
            border-left: 5px solid var(--accent);
            margin-bottom: 25px;
            font-size: 1rem;
            line-height: 1.4;
        }

        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }

        @media (max-width: 850px) {
            .content-grid { grid-template-columns: 1fr; }
            body { align-items: flex-start; }
            .quiz-card { padding: 25px; }
        }

        .img-frame {
            border: var(--border);
            padding: 10px;
            background: #fff;
            margin-bottom: 20px;
            text-align: center;
        }

        .img-frame img {
            width: 100%;
            max-width: 300px;
            display: block;
            margin: auto;
            pointer-events: none;
        }

        .drop-zone {
            height: 100px;
            border: 5px dashed #000;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 15px;
            font-weight: 800;
            background: #f8f8f8;
            transition: 0.3s;
            font-size: 0.9rem;
        }

        .drop-zone.drag-over {
            background: var(--accent);
            border-style: solid;
        }

        .option-card {
            background: #fff;
            border: 3px solid #000;
            padding: 15px 20px;
            margin-bottom: 12px;
            cursor: grab;
            font-size: 0.9rem;
            font-weight: 700;
            box-shadow: 4px 4px 0px #000;
            transition: 0.2s;
        }

        .option-card:hover {
            transform: translate(-3px, -3px);
            box-shadow: 8px 8px 0px var(--accent);
        }

        .correct-state { background: var(--correct) !important; color: #000 !important; }
        .wrong-state { background: var(--wrong) !important; color: #fff !important; }
        
        .highlight-correct {
            border: 5px solid var(--correct) !important;
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse { from { transform: scale(1); } to { transform: scale(0.98); } }

        .creators-box {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            background: #fff;
            border: 3px solid #000;
            padding: 10px;
            box-shadow: 5px 5px 0px #000;
            font-family: 'Arial Black', sans-serif;
            font-size: 10px;
            line-height: 1.4;
            text-transform: uppercase;
        }
    </style>
    <script src="quiz-core.js"></script>
</head>
<body>

    <canvas id="particles"></canvas>

    <div class="quiz-card">
        <div class="header-ui">
            <div class="badge">SKOR: <span id="score-val">0</span></div>
            <div class="badge" id="timer">02:00</div>
        </div>

        <div class="instruction">
            <strong>PERHATIKAN GAMBAR ALAT MUSIK BERIKUT.</strong><br>
            Seret deskripsi yang paling tepat ke dalam kotak di bawah gambar Kolintang!
        </div>

        <div class="content-grid">
            <div class="visual-side">
                <div class="img-frame">
                    <img src="images/kolintang.jpg" alt="Kolintang">
                    <p style="margin-top:10px; font-weight:900; letter-spacing:2px;">KOLINTANG</p>
                </div>
                <div id="drop-zone" class="drop-zone">
                    DROP DESKRIPSI DI SINI
                </div>
            </div>

            <div class="options-side" id="options-container">
                <!-- Javascript will insert options -->
            </div>
        </div>

    </div>

    <div class="creators-box">
        1. Arya Bilal Azzuri / 08 / XII RPL 3<br>
        2. Fiha Aridhoi / 18 / XII RPL 3<br>
        3. Muhammad Ayman Hammami / 26 / XII RPL 3
    </div>

    <script>
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        
        // Setup Score
        document.getElementById('score-val').innerText = localStorage.getItem('totalScore') || 0;
        
        const quizData = {
            correct: "Alat musik pukul khas Sulawesi Utara yang terbuat dari kayu khusus dan dimainkan secara ansambel.",
            options: [
                "Alat musik pukul khas Sulawesi Utara yang terbuat dari kayu khusus dan dimainkan secara ansambel.",
                "Alat musik gesek tradisional suku Dayak yang dawainya terbuat dari serat pohon.",
                "Instrumen tiup dari bambu asal Jawa Barat yang menghasilkan nada diatonis.",
                "Alat musik petik dawai tunggal yang sering dimainkan di daerah pesisir pantai."
            ]
        };

        let isGameOver = false;

        // Render Options
        const container = document.getElementById('options-container');
        [...quizData.options].sort(() => Math.random() - 0.5).forEach((text, i) => {
            const div = document.createElement('div');
            div.className = 'option-card';
            div.innerText = text;
            div.draggable = true;
            div.id = `opt-${i}`;

            div.addEventListener('dragstart', e => {
                if(isGameOver) return;
                e.dataTransfer.setData('text', e.target.id);
                e.target.style.opacity = "0.4";
            });

            div.addEventListener('dragend', e => {
                e.target.style.opacity = "1";
            });
            
            // Touch support for mobile dragging
            div.addEventListener('touchstart', e => {
                 if(isGameOver) return;
                 // On mobile, we might implement a tap-to-select or proper touch drag.
                 // Ideally similar to HTML5 DnD polyfill behaviour.
                 // For simplicity here, we rely on standard HTML5 DnD which works on most modern mobile browsers
                 // or we can implement a simple click-to-move for accessibility.
            });

            container.appendChild(div);
        });

        // Drop Zone
        const dropZone = document.getElementById('drop-zone');
        
        dropZone.addEventListener('dragover', e => {
            e.preventDefault();
            if(!isGameOver) dropZone.classList.add('drag-over');
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('drag-over');
        });

        dropZone.addEventListener('drop', e => {
            e.preventDefault();
            if(isGameOver) return;
            
            dropZone.classList.remove('drag-over');
            const id = e.dataTransfer.getData('text');
            const el = document.getElementById(id);
            if(!el) return;
            
            const choice = el.innerText;
            isGameOver = true;

            if(choice === quizData.correct) {
                QuizCore.updateScore(10);
                document.getElementById('score-val').innerText = localStorage.getItem('totalScore');
                document.body.style.backgroundColor = "var(--correct)";
                
                el.classList.add('correct-state');
                dropZone.classList.add('correct-state');
                dropZone.innerText = "BENAR!";
                setTimeout(() => window.location.href = 'soal4.html', 1500);
            } else {
                el.classList.add('wrong-state');
                dropZone.classList.add('wrong-state');
                dropZone.innerText = "SALAH!";
                document.body.style.backgroundColor = "var(--wrong)";
                
                // Show corect one
                document.querySelectorAll('.option-card').forEach(card => {
                    if(card.innerText === quizData.correct) card.classList.add('highlight-correct');
                });
                setTimeout(() => window.location.href = 'soal4.html', 2500);
            }
        });

        // Simple particle animation
        let particles = [];
        for(let i=0; i<30; i++) particles.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*2});
        function anim() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "rgba(255,255,255,0.1)";
            particles.forEach(p => {
                ctx.beginPath(); ctx.arc(p.x, p.y, p.s, 0, Math.PI*2); ctx.fill();
                p.y -= 0.5; if(p.y < 0) p.y = canvas.height;
            });
            requestAnimationFrame(anim);
        }
        anim();
    </script>
</body>
</html>