<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soal 2 - Kuliner Matching</title>
    <style>
        :root {
            --bg: #000000;
            --card: #ffffff;
            --accent: #ff9d00; /* Warna Cuko Pempek */
            --correct: #00ff88;
            --wrong: #ff0055;
            --text: #000000;
            --border: 5px solid #000000;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial Black', sans-serif;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            overflow-y: auto;
            overflow-x: hidden;
        }

        #particles {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
        }

        /* Quiz Card */
        .quiz-card {
            background: var(--card);
            border: var(--border);
            box-shadow: 15px 15px 0px var(--accent);
            width: 100%;
            max-width: 1000px;
            padding: 40px;
            position: relative;
            z-index: 10;
            animation: pageIn 0.8s forwards cubic-bezier(0.23, 1, 0.32, 1);
            margin: auto;
        }

        @keyframes pageIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .page-exit {
            animation: pageOut 0.8s forwards cubic-bezier(0.7, 0, 0.3, 1) !important;
        }

        @keyframes pageOut {
            0% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(-100vw); opacity: 0; }
        }

        .header-ui {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .badge {
            border: 3px solid #000;
            padding: 8px 15px;
            background: #fff;
            box-shadow: 4px 4px 0px #000;
            font-size: 1rem;
        }

        /* Question Text Area */
        .question-box {
            background: #000;
            color: #fff;
            padding: 15px;
            margin-bottom: 25px;
            border-left: 10px solid var(--accent);
            line-height: 1.4;
            font-size: 1rem;
        }

        .game-layout {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 30px;
            align-items: center;
        }

        @media (max-width: 850px) {
            .game-layout { grid-template-columns: 1fr; }
            body { align-items: flex-start; }
            .quiz-card { padding: 25px; }
        }

        /* Target Zone */
        .matching-area {
            position: relative;
            border: var(--border);
            background: #eee;
            transition: 0.3s;
        }

        .matching-area img {
            width: 100%;
            display: block;
        }

        .drop-target {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,157,0,0);
            transition: 0.3s;
            font-weight: 900;
            text-align: center;
            padding: 20px;
        }

        .drop-target.drag-over {
            background: rgba(255,157,0,0.4);
            backdrop-filter: blur(4px);
        }

        /* Options */
        .options-column {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-tag {
            background: #fff;
            border: 3px solid #000;
            padding: 15px;
            cursor: grab;
            font-size: 0.85rem;
            box-shadow: 5px 5px 0px #000;
            transition: 0.2s;
            user-select: none;
        }

        .option-tag:hover {
            transform: translate(-3px, -3px);
            box-shadow: 8px 8px 0px var(--accent);
        }

        /* Feedback States */
        .is-correct { background: var(--correct) !important; box-shadow: 4px 4px 0px #000 !important; }
        .is-wrong { background: var(--wrong) !important; color: #fff !important; animation: shake 0.4s; }
        .highlight-correct { border: 5px solid var(--correct) !important; animation: glow 1s infinite alternate; }

        @keyframes glow {
            from { box-shadow: 0 0 5px var(--correct); }
            to { box-shadow: 0 0 20px var(--correct); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .creators-box {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 100;
            background: #fff;
            border: 3px solid #000;
            padding: 10px;
            box-shadow: 5px 5px 0px #000;
            font-family: 'Arial Black', sans-serif;
            font-size: 10px;
            line-height: 1.4;
            text-transform: uppercase;
        }
    </style>
    <script src="quiz-core.js"></script>
</head>
<body>

    <canvas id="particles"></canvas>

    <div class="quiz-card">
        <div class="header-ui">
            <div class="badge">SKOR: <span id="score-display">0</span></div>
            <div class="badge" id="timer">02:00</div>
        </div>

        <div class="question-box">
            Perhatikan gambar makanan khas daerah berikut. Seret jawaban yang paling tepat untuk menunjukkan asal dan ciri makanan tersebut.
        </div>

        <div class="game-layout">
            <div class="matching-area">
                <img src="images/pempek.jpg" alt="Pempek">
                <div id="drop-zone" class="drop-target">
                    <span id="drop-text" style="background:white; border:2px solid #000; padding:5px 10px;">TARUH DISINI</span>
                </div>
            </div>

            <div class="options-column" id="options-wrap">
                </div>
        </div>

    </div>

    <div class="creators-box">
        1. Arya Bilal Azzuri / 08 / XII RPL 3<br>
        2. Fiha Aridhoi / 18 / XII RPL 3<br>
        3. Muhammad Ayman Hammami / 26 / XII RPL 3
    </div>

    <script>
        // Update score display from previous question
        const totalScore = parseInt(localStorage.getItem('totalScore')) || 0;
        document.getElementById('score-display').innerText = totalScore;

        const quizData = {
            correct: "Makanan khas Palembang berbahan dasar ikan yang disajikan dengan kuah cuko bercita rasa asam dan pedas.",
            options: [
                "Makanan khas Palembang berbahan dasar ikan yang disajikan dengan kuah cuko bercita rasa asam dan pedas.",
                "Makanan khas Betawi berbahan dasar nasi dan telur yang dimasak dengan cara dipanggang.",
                "Makanan khas Surabaya yang terdiri dari sayuran, tahu, tempe, dan potongan mulut sapi.",
                "Makanan khas Minangkabau yang dimasak dengan bumbu rempah dan santan dalam waktu lama.",
                "Makanan khas Makassar berupa sup iga sapi dengan kuah rempah yang kaya rasa."
            ]
        };

        let timeLeft = 120;
        let isDone = false;

        // Render Options
        const container = document.getElementById('options-wrap');
        [...quizData.options].sort(() => Math.random() - 0.5).forEach((text, i) => {
            const div = document.createElement('div');
            div.className = 'option-tag';
            div.innerText = text;
            div.draggable = true;
            div.id = `label-${i}`;
            div.addEventListener('dragstart', e => {
                if(isDone) return;
                e.dataTransfer.setData('text', e.target.id);
            });
            container.appendChild(div);
        });


        // Drag & Drop
        const dropZone = document.getElementById('drop-zone');
        const dropText = document.getElementById('drop-text');

        dropZone.addEventListener('dragover', e => {
            e.preventDefault();
            if(!isDone) dropZone.classList.add('drag-over');
        });

        dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over'));

        dropZone.addEventListener('drop', e => {
            e.preventDefault();
            if(isDone) return;
            
            dropZone.classList.remove('drag-over');
            const id = e.dataTransfer.getData('text');
            const el = document.getElementById(id);
            const val = el.innerText;
            isDone = true;

            if(val === quizData.correct) {
                QuizCore.updateScore(10);
                let newTotal = (parseInt(localStorage.getItem('totalScore')) || 0);
                document.getElementById('score-display').innerText = newTotal;
                document.body.style.backgroundColor = "var(--correct)";
                
                el.classList.add('is-correct');
                dropText.innerText = "BENAR!";
                dropText.style.background = "var(--correct)";
                setTimeout(() => handleFinish(), 2000);
            } else {
                el.classList.add('is-wrong');
                dropText.innerText = "SALAH!";
                dropText.style.background = "var(--wrong)";
                dropText.style.color = "#fff";
                document.body.style.backgroundColor = "var(--wrong)";
                
                document.querySelectorAll('.option-tag').forEach(tag => {
                    if(tag.innerText === quizData.correct) tag.classList.add('highlight-correct');
                });
                setTimeout(() => handleFinish(), 3000);
            }
        });

        function handleFinish() {
            document.querySelector('.quiz-card').classList.add('page-exit');
            setTimeout(() => {
                window.location.href = 'soal3.html';
            }, 800);
        }

        // Background Particles
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let ps = [];
        for(let i=0; i<40; i++) ps.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*2});
        function anim() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "rgba(255,255,255,0.2)";
            ps.forEach(p => {
                ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
                p.y -= 0.5; if(p.y < 0) p.y = canvas.height;
            });
            requestAnimationFrame(anim);
        }
        anim();
    </script>
</body>
</html>